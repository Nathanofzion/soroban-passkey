{"version":3,"file":"plugin.js","sources":["esm/index.js","../node_modules/@simplewebauthn/browser/dist/bundle/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst WebAuthn = registerPlugin('WebAuthn', {\n    web: () => import('./web').then(m => new m.WebAuthnWeb()),\n});\nexport * from './definitions';\nexport { WebAuthn };\n//# sourceMappingURL=index.js.map","/* [@simplewebauthn/browser@9.0.1] */\nfunction utf8StringToBuffer(value) {\n    return new TextEncoder().encode(value);\n}\n\nfunction bufferToBase64URLString(buffer) {\n    const bytes = new Uint8Array(buffer);\n    let str = '';\n    for (const charCode of bytes) {\n        str += String.fromCharCode(charCode);\n    }\n    const base64String = btoa(str);\n    return base64String.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=/g, '');\n}\n\nfunction base64URLStringToBuffer(base64URLString) {\n    const base64 = base64URLString.replace(/-/g, '+').replace(/_/g, '/');\n    const padLength = (4 - (base64.length % 4)) % 4;\n    const padded = base64.padEnd(base64.length + padLength, '=');\n    const binary = atob(padded);\n    const buffer = new ArrayBuffer(binary.length);\n    const bytes = new Uint8Array(buffer);\n    for (let i = 0; i < binary.length; i++) {\n        bytes[i] = binary.charCodeAt(i);\n    }\n    return buffer;\n}\n\nfunction browserSupportsWebAuthn() {\n    return (window?.PublicKeyCredential !== undefined &&\n        typeof window.PublicKeyCredential === 'function');\n}\n\nfunction toPublicKeyCredentialDescriptor(descriptor) {\n    const { id } = descriptor;\n    return {\n        ...descriptor,\n        id: base64URLStringToBuffer(id),\n        transports: descriptor.transports,\n    };\n}\n\nfunction isValidDomain(hostname) {\n    return (hostname === 'localhost' ||\n        /^([a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}$/i.test(hostname));\n}\n\nclass WebAuthnError extends Error {\n    constructor({ message, code, cause, name, }) {\n        super(message, { cause });\n        this.name = name ?? cause.name;\n        this.code = code;\n    }\n}\n\nfunction identifyRegistrationError({ error, options, }) {\n    const { publicKey } = options;\n    if (!publicKey) {\n        throw Error('options was missing required publicKey property');\n    }\n    if (error.name === 'AbortError') {\n        if (options.signal instanceof AbortSignal) {\n            return new WebAuthnError({\n                message: 'Registration ceremony was sent an abort signal',\n                code: 'ERROR_CEREMONY_ABORTED',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'ConstraintError') {\n        if (publicKey.authenticatorSelection?.requireResidentKey === true) {\n            return new WebAuthnError({\n                message: 'Discoverable credentials were required but no available authenticator supported it',\n                code: 'ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT',\n                cause: error,\n            });\n        }\n        else if (publicKey.authenticatorSelection?.userVerification === 'required') {\n            return new WebAuthnError({\n                message: 'User verification was required but no available authenticator supported it',\n                code: 'ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'InvalidStateError') {\n        return new WebAuthnError({\n            message: 'The authenticator was previously registered',\n            code: 'ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED',\n            cause: error,\n        });\n    }\n    else if (error.name === 'NotAllowedError') {\n        return new WebAuthnError({\n            message: error.message,\n            code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n            cause: error,\n        });\n    }\n    else if (error.name === 'NotSupportedError') {\n        const validPubKeyCredParams = publicKey.pubKeyCredParams.filter((param) => param.type === 'public-key');\n        if (validPubKeyCredParams.length === 0) {\n            return new WebAuthnError({\n                message: 'No entry in pubKeyCredParams was of type \"public-key\"',\n                code: 'ERROR_MALFORMED_PUBKEYCREDPARAMS',\n                cause: error,\n            });\n        }\n        return new WebAuthnError({\n            message: 'No available authenticator supported any of the specified pubKeyCredParams algorithms',\n            code: 'ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG',\n            cause: error,\n        });\n    }\n    else if (error.name === 'SecurityError') {\n        const effectiveDomain = window.location.hostname;\n        if (!isValidDomain(effectiveDomain)) {\n            return new WebAuthnError({\n                message: `${window.location.hostname} is an invalid domain`,\n                code: 'ERROR_INVALID_DOMAIN',\n                cause: error,\n            });\n        }\n        else if (publicKey.rp.id !== effectiveDomain) {\n            return new WebAuthnError({\n                message: `The RP ID \"${publicKey.rp.id}\" is invalid for this domain`,\n                code: 'ERROR_INVALID_RP_ID',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'TypeError') {\n        if (publicKey.user.id.byteLength < 1 || publicKey.user.id.byteLength > 64) {\n            return new WebAuthnError({\n                message: 'User ID was not between 1 and 64 characters',\n                code: 'ERROR_INVALID_USER_ID_LENGTH',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'UnknownError') {\n        return new WebAuthnError({\n            message: 'The authenticator was unable to process the specified options, or could not create a new credential',\n            code: 'ERROR_AUTHENTICATOR_GENERAL_ERROR',\n            cause: error,\n        });\n    }\n    return error;\n}\n\nclass BaseWebAuthnAbortService {\n    createNewAbortSignal() {\n        if (this.controller) {\n            const abortError = new Error('Cancelling existing WebAuthn API call for new one');\n            abortError.name = 'AbortError';\n            this.controller.abort(abortError);\n        }\n        const newController = new AbortController();\n        this.controller = newController;\n        return newController.signal;\n    }\n    cancelCeremony() {\n        if (this.controller) {\n            const abortError = new Error('Manually cancelling existing WebAuthn API call');\n            abortError.name = 'AbortError';\n            this.controller.abort(abortError);\n            this.controller = undefined;\n        }\n    }\n}\nconst WebAuthnAbortService = new BaseWebAuthnAbortService();\n\nconst attachments = ['cross-platform', 'platform'];\nfunction toAuthenticatorAttachment(attachment) {\n    if (!attachment) {\n        return;\n    }\n    if (attachments.indexOf(attachment) < 0) {\n        return;\n    }\n    return attachment;\n}\n\nasync function startRegistration(creationOptionsJSON) {\n    if (!browserSupportsWebAuthn()) {\n        throw new Error('WebAuthn is not supported in this browser');\n    }\n    const publicKey = {\n        ...creationOptionsJSON,\n        challenge: base64URLStringToBuffer(creationOptionsJSON.challenge),\n        user: {\n            ...creationOptionsJSON.user,\n            id: utf8StringToBuffer(creationOptionsJSON.user.id),\n        },\n        excludeCredentials: creationOptionsJSON.excludeCredentials?.map(toPublicKeyCredentialDescriptor),\n    };\n    const options = { publicKey };\n    options.signal = WebAuthnAbortService.createNewAbortSignal();\n    let credential;\n    try {\n        credential = (await navigator.credentials.create(options));\n    }\n    catch (err) {\n        throw identifyRegistrationError({ error: err, options });\n    }\n    if (!credential) {\n        throw new Error('Registration was not completed');\n    }\n    const { id, rawId, response, type } = credential;\n    let transports = undefined;\n    if (typeof response.getTransports === 'function') {\n        transports = response.getTransports();\n    }\n    let responsePublicKeyAlgorithm = undefined;\n    if (typeof response.getPublicKeyAlgorithm === 'function') {\n        try {\n            responsePublicKeyAlgorithm = response.getPublicKeyAlgorithm();\n        }\n        catch (error) {\n            warnOnBrokenImplementation('getPublicKeyAlgorithm()', error);\n        }\n    }\n    let responsePublicKey = undefined;\n    if (typeof response.getPublicKey === 'function') {\n        try {\n            const _publicKey = response.getPublicKey();\n            if (_publicKey !== null) {\n                responsePublicKey = bufferToBase64URLString(_publicKey);\n            }\n        }\n        catch (error) {\n            warnOnBrokenImplementation('getPublicKey()', error);\n        }\n    }\n    let responseAuthenticatorData;\n    if (typeof response.getAuthenticatorData === 'function') {\n        try {\n            responseAuthenticatorData = bufferToBase64URLString(response.getAuthenticatorData());\n        }\n        catch (error) {\n            warnOnBrokenImplementation('getAuthenticatorData()', error);\n        }\n    }\n    return {\n        id,\n        rawId: bufferToBase64URLString(rawId),\n        response: {\n            attestationObject: bufferToBase64URLString(response.attestationObject),\n            clientDataJSON: bufferToBase64URLString(response.clientDataJSON),\n            transports,\n            publicKeyAlgorithm: responsePublicKeyAlgorithm,\n            publicKey: responsePublicKey,\n            authenticatorData: responseAuthenticatorData,\n        },\n        type,\n        clientExtensionResults: credential.getClientExtensionResults(),\n        authenticatorAttachment: toAuthenticatorAttachment(credential.authenticatorAttachment),\n    };\n}\nfunction warnOnBrokenImplementation(methodName, cause) {\n    console.warn(`The browser extension that intercepted this WebAuthn API call incorrectly implemented ${methodName}. You should report this error to them.\\n`, cause);\n}\n\nfunction bufferToUTF8String(value) {\n    return new TextDecoder('utf-8').decode(value);\n}\n\nfunction browserSupportsWebAuthnAutofill() {\n    const globalPublicKeyCredential = window\n        .PublicKeyCredential;\n    if (globalPublicKeyCredential.isConditionalMediationAvailable === undefined) {\n        return new Promise((resolve) => resolve(false));\n    }\n    return globalPublicKeyCredential.isConditionalMediationAvailable();\n}\n\nfunction identifyAuthenticationError({ error, options, }) {\n    const { publicKey } = options;\n    if (!publicKey) {\n        throw Error('options was missing required publicKey property');\n    }\n    if (error.name === 'AbortError') {\n        if (options.signal instanceof AbortSignal) {\n            return new WebAuthnError({\n                message: 'Authentication ceremony was sent an abort signal',\n                code: 'ERROR_CEREMONY_ABORTED',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'NotAllowedError') {\n        return new WebAuthnError({\n            message: error.message,\n            code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n            cause: error,\n        });\n    }\n    else if (error.name === 'SecurityError') {\n        const effectiveDomain = window.location.hostname;\n        if (!isValidDomain(effectiveDomain)) {\n            return new WebAuthnError({\n                message: `${window.location.hostname} is an invalid domain`,\n                code: 'ERROR_INVALID_DOMAIN',\n                cause: error,\n            });\n        }\n        else if (publicKey.rpId !== effectiveDomain) {\n            return new WebAuthnError({\n                message: `The RP ID \"${publicKey.rpId}\" is invalid for this domain`,\n                code: 'ERROR_INVALID_RP_ID',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'UnknownError') {\n        return new WebAuthnError({\n            message: 'The authenticator was unable to process the specified options, or could not create a new assertion signature',\n            code: 'ERROR_AUTHENTICATOR_GENERAL_ERROR',\n            cause: error,\n        });\n    }\n    return error;\n}\n\nasync function startAuthentication(requestOptionsJSON, useBrowserAutofill = false) {\n    if (!browserSupportsWebAuthn()) {\n        throw new Error('WebAuthn is not supported in this browser');\n    }\n    let allowCredentials;\n    if (requestOptionsJSON.allowCredentials?.length !== 0) {\n        allowCredentials = requestOptionsJSON.allowCredentials?.map(toPublicKeyCredentialDescriptor);\n    }\n    const publicKey = {\n        ...requestOptionsJSON,\n        challenge: base64URLStringToBuffer(requestOptionsJSON.challenge),\n        allowCredentials,\n    };\n    const options = {};\n    if (useBrowserAutofill) {\n        if (!(await browserSupportsWebAuthnAutofill())) {\n            throw Error('Browser does not support WebAuthn autofill');\n        }\n        const eligibleInputs = document.querySelectorAll('input[autocomplete$=\\'webauthn\\']');\n        if (eligibleInputs.length < 1) {\n            throw Error('No <input> with \"webauthn\" as the only or last value in its `autocomplete` attribute was detected');\n        }\n        options.mediation = 'conditional';\n        publicKey.allowCredentials = [];\n    }\n    options.publicKey = publicKey;\n    options.signal = WebAuthnAbortService.createNewAbortSignal();\n    let credential;\n    try {\n        credential = (await navigator.credentials.get(options));\n    }\n    catch (err) {\n        throw identifyAuthenticationError({ error: err, options });\n    }\n    if (!credential) {\n        throw new Error('Authentication was not completed');\n    }\n    const { id, rawId, response, type } = credential;\n    let userHandle = undefined;\n    if (response.userHandle) {\n        userHandle = bufferToUTF8String(response.userHandle);\n    }\n    return {\n        id,\n        rawId: bufferToBase64URLString(rawId),\n        response: {\n            authenticatorData: bufferToBase64URLString(response.authenticatorData),\n            clientDataJSON: bufferToBase64URLString(response.clientDataJSON),\n            signature: bufferToBase64URLString(response.signature),\n            userHandle,\n        },\n        type,\n        clientExtensionResults: credential.getClientExtensionResults(),\n        authenticatorAttachment: toAuthenticatorAttachment(credential.authenticatorAttachment),\n    };\n}\n\nfunction platformAuthenticatorIsAvailable() {\n    if (!browserSupportsWebAuthn()) {\n        return new Promise((resolve) => resolve(false));\n    }\n    return PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();\n}\n\nexport { WebAuthnAbortService, WebAuthnError, base64URLStringToBuffer, browserSupportsWebAuthn, browserSupportsWebAuthnAutofill, bufferToBase64URLString, platformAuthenticatorIsAvailable, startAuthentication, startRegistration };\n","import { WebPlugin } from '@capacitor/core';\nimport { browserSupportsWebAuthn, browserSupportsWebAuthnAutofill, startAuthentication, startRegistration } from '@simplewebauthn/browser';\nexport class WebAuthnWeb extends WebPlugin {\n    async startRegistration(publicKeyCredentialCreationOptionsJSON) {\n        let res;\n        try {\n            res = await startRegistration(publicKeyCredentialCreationOptionsJSON);\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n        return Promise.resolve(res);\n    }\n    async startAuthentication(requestOptionsJSON, useBrowserAutofill) {\n        let res;\n        try {\n            res = await startAuthentication(requestOptionsJSON, useBrowserAutofill);\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n        return Promise.resolve(res);\n    }\n    async isWebAuthnAvailable() {\n        return this.isAvailable('webauthn');\n    }\n    async isWebAuthnAutoFillAvailable() {\n        return this.isAvailable('webauthnautofill');\n    }\n    async isAvailable(type) {\n        let val = false;\n        if (type === 'webauthn') {\n            val = await browserSupportsWebAuthn();\n        }\n        if (type === 'webauthnautofill') {\n            val = await browserSupportsWebAuthnAutofill();\n        }\n        return Promise.resolve({ value: val });\n    }\n}\n//# sourceMappingURL=web.js.map"],"names":["registerPlugin","WebPlugin"],"mappings":"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"}